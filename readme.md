# Описание

В этом репозитории представлена программа для создания обучающей выборки из изображений с нейронами. Автор программы: __Алексей Левашов__

---

## Параметры командной строки для запуска

```bash
TrainingSampleMaker.exe "<Путь к изображению (1)>" -bg "<Путь к папке с фоном (2)>" -fg "<Путь к папке с нейронами (3)>"
```

> `(1)` Путь к изображению  
> `(2)` Путь к папке, куда будут сохраняться выборка с нейронами  
> `(3)` Путь к папке, куда будут сохраняться выборка с фоном

В папки сохраняется xml файл с описанием путей и сами изображения выборки

---

## Запуск программы для серии изображений  


В `bin/run.bat` - пример запуска для нескольких изображений. Нужно заменить `Tv104.jpg` и `Tv244.jpg` на свои изображения и на каждом изображении последовательно сделать разметку.

---

## Горячие клавиши для работы с интерфейсом

В приложении `opencv` отсутствует `UI`, поэтому все взаимодействие только на горячих клавишах и мышкой:
>  Горячая клавиша `h` показывает/убирает помощь  
>  Клавиши `w`, `a`, `s`, `d` для навигации по изображению; `e`, `q` для увеличения  
>  Клавиши `1`, `2`, `3`, `4` - подбор подходящего размера окна для нейронов:  
>  >  `1` - 24x24 px  
>  >  `2` - 36x36 px  
>  >  `3` - 48x48 px  
>  >  `4` - 60x60 px

>  После разметки можно нажать на `Ctrl + f` - будет сгенерирована выборка фона  
>  `Ctrl + s` - делает сохранение выборки, выборка фона будет сгенерирована автоматически  
>  `Enter` - закрыть программу и сделать сохранение  
>  `Esc` - закрыть программу без сохранения  
>  `Ctrl + r` - удаляет всю разметку  
>   `Ctrl + z` - Удаляет последнюю разметку  

*Правая кнопка мыши* используется для навигации по изображению.  
*Левая кнопка мыши* добавляет/удаляет размеченную область:
  * eсли под курсом нет размеченной области - она добавляется
  * если есть - удаляется

---

## Удаление разметки для всех изображений 

Исполняемый файл `clean.bat` удаляет всю разметку для всех изображений

## Воспроизведение разметки

В `Windows`, если разметка для изображения уже сделана - то она подгружается и ее можно редактировать.  
Чтобы она работала в `Mac OS X` и других системах нужно дописать функцию получения файлов из папки, в коде эта функция находится дефайном `WIN32`

---

## Дополнительная информация

Проект написан на MS Visual Studio 2010 с билиотекой opencv 2.4.9. Скомпилированный для x32 системе есть в папке bin


## Контакты автора программы

почта: alexeylevashov89@gmail.com  
скайп: levashov_a89  
вк: [Вконтакте](http://vk.com/levashov_a89)  